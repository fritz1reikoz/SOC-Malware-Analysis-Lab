![main](https://github.com/fritz1reikoz/SOC-Malware-Analysis-Lab/assets/55414490/ae76552c-7967-4e03-86cb-f9211287d0c5)

Greetings and welcome to the process of creating a unique and safe virus analysis environment. Understanding and analyzing harmful software is an essential ability in the constantly changing field of cybersecurity. We'll go through each stage of the process together in this guide to make sure you have the setup you need to analyze the dangerous software.

Let's quickly review safe malware handling practices before we get started:

1. <b>Isolation</b>: Malware analysis should always be done in a supervised, private setting. Make use of specialized hardware or virtual computers that are disconnected from your primary network.
2. <b>Virtualization</b>: For malware analysis, use virtualization tools such as VMware or VirtualBox to establish isolated environments. Before executing a sample, snapshots might be helpful for capturing the status of a system.
3. <b>Air-Gapped Systems</b>: For really sensitive or unknown samples, think about utilizing air-gapped systems (not linked to any network) to avoid any unintentional dissemination.
4. <b>Network Segmentation</b>: Keep your malware analysis lab and the network separate to avoid unintentional virus distribution. This aids in keeping the threat contained within the laboratory setting.
5. <b>Secure File Storage</b>: To stop inadvertent malware execution and unwanted access, keep malware samples in password-protected folders or encrypted containers.
6. <b>Regular Snapshots</b>: Take regular snapshots of your analytic environment so that, in case something goes wrong, you can restore it to a clean state.
7. <b>Documentation</b>: Record all of the steps in your analysis, the instruments you used, the behavior you saw, and any conclusions you came to. This documentation is helpful for sharing information with others and for future reference.
8. <b>Check Hash-Files</b>: Use hash functions to confirm the integrity of your malware samples. This makes it easier to verify that the samples haven't been altered.


<b>Note</b>: <i>Exercise caution and prioritize safety always in every step of the detonation process.</i>


A few software components need to be downloaded in order to speed up the setup procedure. The list of materials needed for the setup is shown below. Please download them beforehand to speed up the entire procedure.

1. Virtual Box (Free): {https://www.virtualbox.org/wiki/Downloads}
2. Windows 11 ISO file: {https://www.microsoft.com/software-download/windows11}
3. Flare-VM: {https://github.com/mandiant/flare-vm/archive/refs/heads/main.zip}
4. REMnux VM: {https://www.remnux.org}


Install Windows 11 on Virtualbox first. Let's start the setup procedure after it has been resolved. To ensure a better understanding, please carefully follow the procedures.

<h2>Things to Note</h2>

It is recommended to deploy FLARE-VM solely on virtual machines.

1. Make sure Windows has atleast 60GB storage space and 2GB of Ram.
2. The PC name has no space or hyphen inbetween, Use something simple (E.g TestPC, Lab)

![1](https://github.com/fritz1reikoz/SOC-Malware-Analysis-Lab/assets/55414490/0c36fef8-77d5-4662-a485-18084ea603e0)


3. Type <b>"Updates"</b> in the windows search bar, Click on <b>"Windows Update"</b>. Locate <b>"Pause Update"</b>, click on it to pause updating the windows machine.

![2](https://github.com/fritz1reikoz/SOC-Malware-Analysis-Lab/assets/55414490/e1aa1808-714d-41c6-bdc8-a774855efae6)

4. Next, Locate <b>"Privacy & Security"</b> on the left navigation panel and then click on <b>"Windows Security"</b>. After that, also click on <b>"Virus & Threat Protection"</b>. On the next screen, click on <b>"Manage Settings"</b> then toggle off the following options: <b>Realtime protection</b> and <b>Tamper Protection</b>.

![3](https://github.com/fritz1reikoz/SOC-Malware-Analysis-Lab/assets/55414490/8bb5e711-c575-4ff6-ad4f-1bfc3b1a6ef1)

5. Finally, access the <b>Group Policy Editor</b> (gpedit.msc) to turn off Windows Defender, else after every system restart while installation is ongoing, Windows 11 will re-enable Windows Defender and, that in turn wil disrupt the installation process.


<b><i>Once those have been taken care of, windows is now ready to start accepting installation of the FlareVM.</i></b>



<h2>Installing FlareVM</h2>

Type <b>"Powershell"</b> in the search bar and then <b>"Run as Administrator"</b>.

![4](https://github.com/fritz1reikoz/SOC-Malware-Analysis-Lab/assets/55414490/933ce701-6145-4222-995e-729a1e3edd37)


In the open powershell commandline window, paste the following code:

(New-Object net.webclient).DownloadFile('https://raw.githubusercontent.com/mandiant/flare-vm/main/install.ps1',"$([Environment]::GetFolderPath("Desktop"))\install.ps1")

This script should start downloading the extra needed scripts to your desktop.

![5](https://github.com/fritz1reikoz/SOC-Malware-Analysis-Lab/assets/55414490/55a27a0f-7168-42a3-9a64-0f95e76d3e43)

Next we need to unblock the installation script, but you need to make sure to be in the same directory the script is downloaded to on powershell.

Input the following: <b>unblock-file .\install.ps1</b>
Hit Enter.

Next, type in: <b>Set-ExecutionPolicy Unrestricted</b>
Hit Enter.

Enter <b>"A"</b> for all when the prompt appears and hit enter.

![6](https://github.com/fritz1reikoz/SOC-Malware-Analysis-Lab/assets/55414490/b706e2d8-834b-400e-b52b-a56b191fb460)

Finally, Install Script by typing: <b>.\install.ps1</b>
Hit Enter

Whenever the <b>"Do you want to proceed?"</b> prompt displays, Type <b>"Y"</b> and hit enter.

![7](https://github.com/fritz1reikoz/SOC-Malware-Analysis-Lab/assets/55414490/d55a37b0-e5e1-4760-a696-9443f98529d0)

You'll eventually be prompted to enter your Windows account password (Created during windows installation), do so.

Eventually, a GUI will display. For simplicity reasons select all the files from the left side of the below panel and move them to the right side of the panel by clicking on the <b>">>>"</b> button and then hit the "OK" button.

![9](https://github.com/fritz1reikoz/SOC-Malware-Analysis-Lab/assets/55414490/2be0e6f0-4dff-4a7c-a679-ec8f000e202e)

Eventually, The system will restart a couple of times and, each time, it'll continue the installation process automatically once it's back up, so be patient because it'll take a while. Once done, these are screenshots of what you get:

![9](https://github.com/fritz1reikoz/SOC-Malware-Analysis-Lab/assets/55414490/794e8985-dc2c-4d8a-a451-3cf862768e02)

![10](https://github.com/fritz1reikoz/SOC-Malware-Analysis-Lab/assets/55414490/afc2ca8f-d469-4d70-8688-4b20c8322b46)

FlareVM has been successfully installed and is ready to run your dynamic analysis. Next We'll Setup REMnux VM.




<h2>Installing REMnux</h2>

1. Navigate to www.remnux.org
2. Scroll down till you see <b>"Download the Remnux VM"</b>, then click the download button to download REMnux.

![11](https://github.com/fritz1reikoz/SOC-Malware-Analysis-Lab/assets/55414490/537d5140-0085-4892-9f5c-28254aff1920)

Once downloading is complete, double click on the file and it'll be automatically imported into virtualbox.

![12](https://github.com/fritz1reikoz/SOC-Malware-Analysis-Lab/assets/55414490/bbedc3dc-9d18-49bb-b32c-4e983e4faac0)

Once the system is done importing, you can click start on the Oracle VM to load into REMnux and start running your static analysis.

<b><i>Congratulations</i></b>
